# 備份

[在微信公眾號檢視本文（含堅果雲備份的設定影片教程）](https://mp.weixin.qq.com/s?__biz=MzI0OTQ4OTAxMQ==&mid=2247483867&idx=1&sn=d24068b74810d5b91b37c1abda436eca&chksm=e991f2c7dee67bd1ed49e74b3131bf7812c22f2a58a82cdac3c30182665296262a3c86a77b1d&mpshare=1&scene=23&srcid=1205mlIjJmwwyVugMJ7P25jM&sharer_sharetime=1639901809270&sharer_shareid=aefb2cf8bbd4980bf3f827f86feb6b04#rd) 

## 一、簡介

### 1.1 為什麼需要配置備份？

由於工具類 APP 性質特殊，一般需要支援本地離線使用，所以資料一般是儲存在本地的。

如果不進行備份的話，在解除安裝應用、更換手機的情況下，你可能會丟失所有的本地資料，只保留團隊動態之類的雲端資料。

**這跟你直接解除安裝微信，也會丟失所有聊天記錄是一致的。**

**也跟你更換手機後，微信資料也需要遷移才能夠保留聊天記錄一樣**（同品牌的手機，大都會支援應用資料遷移，《人升》的資料也能夠直接遷移）。

> 當然，財大氣粗的一些商業應用是支援本地資料儲存+線上增量同步的。
>
> 但是增量同步實際上是個技術壁壘，如果處理不好甚至會導致資料丟失，也會需要一定的演算法或者伺服器資源支撐。

<br/>

《人升》由於種種原因，目前無法實現內建雲同步功能：

- **增量同步屬於技術壁壘**

  我們目前沒有技術，伺服器也沒有足夠的計算和儲存資源來實現增量同步

- **全量同步也需要大量的雲端儲存空間資源**

- **使用者隱私安全**

  我們無法承擔使用者隱私資料洩露的風險。

  隱私資料直接不經過伺服器，能夠最大程度上實現隱私安全。

  使用者才能夠放心記錄自己的隱私事項和感想。

  並且刪除資料也是對應的十分簡單。

<br/>

**因此，《人升》提供了多種備份渠道：**

- WebDAV 備份
- 直接匯出檔案進行備份（預設路徑和自定義路徑）
- Dropbox 備份

<br />

### 1.2 備份內容

備份會匯出你的所有本地資料到一個壓縮檔案內，包括但不限於以下內容：

- 待辦事項內容和歷史記錄

- 商品、金幣等所有記錄

- 成就解鎖記錄、自定義成就

- 感想

- 番茄記錄

- 各類媒體檔案，如事項附件、商品圖示、自定義卡片背景和音效等

  注意：如果備份時勾選了「忽略媒體檔案」則不會匯出該專案

- 選項配置

<br />

### 1.3 方式對比

| 方法           | 解除安裝 | 手機損壞                                                  | 自動備份 | 備註                                                         |
| -------------- | ---- | --------------------------------------------------------- | -------- | ------------------------------------------------------------ |
| 預設路徑備份   | ❌    | ❌                                                         | ❌        | 僅用於非解除安裝情況下的資料恢復                                 |
| 自定義路徑備份 | ✔️    | ❌（除非手動將檔案導向其他裝置，或者將檔案選擇至遠端路徑） | ❌        | **如果安裝了 Google Drive、堅果雲 app，也可以在這裏實現備份至 Google Drive 或堅果雲，實現手動雲備份** |
| 自動備份至`下載`資料夾 | ✔️ | ❌ | ✔️ | 僅適用於Android10及以上裝置 |
| WebDAV 備份     | ✔️    | ✔️                                                         | ✔️        | 需要選擇支援 WebDAV 備份的平臺或者自部署，推薦使用堅果雲       |
| Dropbox 備份    | ✔️    | ✔️                                                         | ✔️        | 需要一定的網路條件，國內環境可能比較麻煩                     |

<br />

完全可以透過配置來實現雲同步的效果，也完全不用擔心資料丟失。

由於 Dropbox 需要特定網路條件才能訪問，

**我們強烈推薦使用堅果雲配置 WebDAV 實現雲同步（只需要操作一次即可一勞永逸），操作步驟可參考下文。**

當然，你也可以選擇每隔一段時間，手動匯出備件檔案進行備份。

---

## 二、配置堅果雲實現 WebDAV 備份

![](_media/backup/01.jpg ': size=30%')

備份功能現已支援透過 WebDAV 協議備份。

> 簡言之，只要某個網盤或者你自己部署的伺服器支援 WebDAV 協議，人升都能將資料備份上去或者從中恢復資料。
>
> 但國內支援 WebDAV 協議的知名網盤目前只有**堅果雲**。

### 2.1 使用方法

#### 2.1.0 影片教程

> [公眾號裡有影片教程](https://mp.weixin.qq.com/s?__biz=MzI0OTQ4OTAxMQ==&mid=2247483867&idx=1&sn=d24068b74810d5b91b37c1abda436eca&chksm=e991f2c7dee67bd1ed49e74b3131bf7812c22f2a58a82cdac3c30182665296262a3c86a77b1d&mpshare=1&scene=23&srcid=1205mlIjJmwwyVugMJ7P25jM&sharer_sharetime=1639901809270&sharer_shareid=aefb2cf8bbd4980bf3f827f86feb6b04#rd)

#### 2.1.1 獲取 WebDAV 地址、賬號、密碼

理論上任意支援 WebDAV 協議的服務都可以使用。

**國內可以使用堅果雲：**

##### 2.2.2 手機版操作

1.  移動端安裝堅果雲 APP（可選：參考下述的電腦版操作，使用瀏覽器執行桌面版操作）。
   ![](_media/backup/04.png ': size=50%')
2.  註冊並登入堅果雲後，在堅果雲的 ` 設定 `-` 第三方應用管理 ` 處，新增應用密碼，應用名稱可輸入 LifeUp。
    ![](_media/backup/05.png ': size=50%')
    ![](_media/backup/06.png ': size=50%')
    ![](_media/backup/07.png ': size=50%')
3.  新增成功後，你能在該頁面看到 ` 伺服器地址 `、` 賬號 ` 和剛纔新增的應用密碼等資訊。
    ![](_media/backup/08.png ': size=50%')
4.  接下來的步驟參考下文**2.2.4 應用配置**。

##### 2.2.3 電腦版操作

> 該操作步驟基於桌面版網站，手機版網站可參考步驟對應進行設定（或者直接瀏覽器設定為桌面版模式）

1.  首先開啟堅果雲官網，註冊並且登入賬號。

2.  點選**右上角使用者名稱**→` 賬號資訊 `。

3.  切換至安全選項。

![](_media/backup/02.png ': size=50%')

4.  在右邊 ` 第三方應用管理 ` 處，點選新增應用，輸入名稱（如：LifeUp）

5.  然後點選 ` 生成密碼 `，儲存此處的 ` 伺服器地址 `、` 賬號 ` 和 ` 密碼 ` 等資訊，然後進入應用內進行配置。

![](_media/backup/03.png ': size=50%')

#### 2.2.4 應用配置

接下來就需要將上述的三個資訊，複製並填寫到人升 APP 中的 ` 側邊欄 `→` 設定 `→` 資料備份/恢復/清除 `→`WebDAV 配置 ` 頁面。填寫後，確認測試成功後，即可在備份頁面使用 ` 備份至 WebDAV` 或者 ` 自動雲同步 ` 功能。

![](_media/backup/09.png ': size=30%')

#### 2.2.5 注意點

- 如果你的備份檔案體積已經大於 10MB，那麼請根據實際情況考慮 ` 忽略媒體檔案 ` 或者調整 ` 自動備份間隔 `。
- **如果備份檔案過大，可能導致上傳失敗。**這時候也可以嘗試開啟 ` 忽略媒體檔案 `。並且可以嘗試另行備份媒體檔案，不然即便成功也算消耗大量流量。甚至導致堅果雲那邊流量超額，無法上傳。

---

## 三、恢復

![](_media/backup/10.png': size=30%')

### 自定義路徑

?> 如果你安裝了堅果雲、Google Drive 等雲盤 app，也能使用該方式在側邊欄下載備份安裝。理論上不需要檔案許可權，恢復更輕鬆。

這種備份方式需要你手動將檔案傳至想要恢復備份的手機中，然後再應用內選取該檔案進行恢復。

!> 由於 Android 10、11 對檔案儲存許可權做了限制。如果你使用 QQ、微信傳遞檔案的話，查詢檔案會比較麻煩。並且一些路徑可能會讀取失敗。

**推薦使用電腦進行操作**，並將檔案最好放在檔案儲存根目錄中進行備份。

以下路徑可能由於許可權問題，恢復失敗：
- ` 檔案儲存根目錄/Android` 下任意子路徑
- ` 檔案儲存根目錄/Download（下載）`
- ` 檔案儲存根目錄/Download（下載）` 下任意子路徑

#### Android 10 及更低版本

<iframe src="//player.bilibili.com/player.html?aid=380415695&bvid=BV1PZ4y1S7ah&cid=479527125&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="80%" height="600"> </iframe>

#### Android 11 及以上

<iframe src="//player.bilibili.com/player.html?aid=250882869&bvid=BV1gv411g7ys&cid=419591550&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="80%" height="600"> </iframe>

### WebDAV/DropBox

這兩種雲同步方式，只需要配置好各自的資訊後，執行對應的恢復方式即可。

當然，特殊情況你也可以去對應的平臺下載檔案，手動進行本地恢復。
