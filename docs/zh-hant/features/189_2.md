# v1.89.0 - 多解鎖條件成就更新介紹（其二）

> 歡迎在公眾號檢視本文，並可訂閱未來的更新~
>
> [v1.89.0 - 多解鎖條件成就更新介紹（其二） (qq.com)](https://mp.weixin.qq.com/s?__biz=MzI0OTQ4OTAxMQ==&mid=2247483960&idx=1&sn=11c7e50afdb31b492dd6d0cc22917428&chksm=e991f124dee6783230abda9c0f820a3f06262a5fc4993200684bcd865a67c0582794654c5ab6&token=1232886144&lang=zh_CN#rd)





本文主要介紹一些細節改動點和**提供完整更新日誌**。

如果你想要檢視新增的功能特性介紹，可以檢視上一篇更新介紹（其一）。



> 目前該版本仍在會員內測中。
>
> 加入會員後，在「擴充套件」頁面選擇加入 alpha 測試，即可在「關於」頁面檢測到更新。



## 🔖總覽

1.  **💫UI：設定、資訊、新圖示、動畫效果**

2.  **⚡️效能：應用啟動速度**

3.  **🖼️圖片：調整路徑、統一預覽、載入、臨時檔案邏輯**

4.  **🚸體驗：指引、互動最佳化完善**

5.  💫**ONE MORE THING**

6.  **完整更新日誌**



---

## ✨ **UI：設定、資訊、新圖示、動畫效果**

“衆所周知”，目前《人升》是沒有專門的設計師，我們也是自學 UI 設計並且嘗試迭代不同的 UI 風格，摸索出了現在的模樣。

也因此應用內的頁面樣式並沒有形成統一的風格，有一部分頁面可能還是廢棄的設計+程式碼架構。



我們會逐漸整改和重構這些設計和程式碼。

### 設定

![](_media/189/17.png ': size=30%')

該版本重新設計和組織了 ` 設定 ` 頁面。

並且由於 `實驗` 的性質與設定類似，都屬於操作頻次較低的設定項。

我們也將其挪入了設定頁面中。

![](_media/189/18.png ': size=30%')

設定的子頁面中，我們也梳理了各個選項的功能分類，增加子標題顯示。

總體組織上應該會更合理，使用者查詢設定項也會更方便。

### 資訊

![](_media/189/19.png ': size=30%')

資訊模組也存在類似的問題，資訊過多且沒有分類。使用者很難一眼看出每一條目的型別和是否有更新。

本次版本為資訊支援了分類和獨立小紅點。

雖然有點逼死強迫症，**但現在資訊每一項都支援了獨立小紅點，使用者能夠明確知道是具體哪一項更新了。**

### 新圖示

![](_media/189/20.png ': size=30%')
![](_media/189/21.png ': size=30%')

預設卡片的 UI 圖示之前是來源多處站點，導致風格、邊距、大小等不統一，我們難以維護和使用，感官上也會感覺不協調。

該版本外包重新設計任務卡片相關的一些圖示，以及提供了新的成就圖示。

商店方面也嘗試加強了金幣的存在感。

![](_media/189/22.png ': size=30%')

>由於上述的問題，這裏不打算提供新舊版本的圖示的切換。
>
>初切換圖示總會有些不習慣，這是正常現象.jpg
>
>

### 動畫效果

> 此處應有個影片

該版本改進了商品、任務選擇彈窗的動畫效果。

避免了老版本切換清單時，彈窗高度閃來閃去的問題。



> 這個問題其實困擾了我們很長時間。
>
> 一年以前就嘗試過改進這裏的效果但以失敗告終。



---

## ⚡️ **效能：應用啟動速度**
### 啟動最佳化
> 節省時間就是節省金錢。

對於一款效率 APP 而言，啟動速度也是影響使用體驗的一大要素。

> 誰也不想打卡的時候還要看幾秒鐘廣告吧.jpg



該版本我們重新梳理了應用的啟動流程，程式碼層面上重構了主頁的邏輯和架構。

**以下表格最佳化前後的資料：**

最佳化前後|冷啟動|溫啟動|熱啟動
---|---|---|---
❌|515.5 毫秒|228.5 毫秒|91.0 毫秒
✅|396.2 毫秒|214.9 毫秒|92.2 毫秒

> 資料基於 Redmi K40 和特定的環境，實際使用可能受環境、安裝來源、裝置等影響。

目前線上的平均冷啟動時長也在 500 毫秒左右，經過這個版本的最佳化，開啟應用使用會更佳順滑。



### 新增成就重構、感想最佳化
該版本爲了支援多條件，也「順便」對 ` 新增成就 ` 頁面做了重構功能。

而我們對`感想`也做了載入速度和動畫效果方面的最佳化。

對於大部分使用者可能沒法直觀體會到“重構”、“效能”方面的最佳化益處。



這裏做下簡單說明，重構其實是使用更現代的程式碼實現現有的邏輯，能夠減少維護這套程式碼的成本，也能方便未來新增新功能。

**對於使用者側的主要是潛在積極影響：**
- 更少 Bug（比如螢幕旋轉不會導致資料丟失、更不容易出現數據不一致的問題）
- 效能更高（開啟更快）
- 未來該模組更新功能更迅速

**我們認為對於一款考慮擁有未來的 APP 而言，**

**重構工作是必備的一環。**

因此我們也會持續在這一塊投入時間。



#### 🚧 後續發展
目前內測版本也有使用者反饋成就的進度計算可能存在延遲的問題。

經過排查這是由於計算邏輯的效能引起的。

在 v1.89.0-rc02 內測版本中，我們針對計算的任務做了一些簡單但有效的最佳化措施。

目前計劃在 v1.90.0 版本重構這一塊的程式碼邏輯，嘗試進一步提升計算效能，以及方便未來擴充套件更多的解鎖條件。

---

## 🖼️ **圖片：調整路徑、統一預覽、載入、臨時檔案邏輯**

v1.89.0 版本對圖片做了一些雜七雜八的最佳化，簡單列舉下。

### 調整路徑
線上版本，應用的媒體檔案是存放在媒體路徑 `（Android/media/{包名}）` 的。

但偶有使用者發現圖片被未知的外部軟體刪除的問題，我們決定將圖片遷移到了外部私有儲存路徑 `（Android/data/${包名}/files/media）`，以減少這類問題。

同時，我們發現老版本有一次誤修改了感想圖片的儲存路徑。

導致那個版本前後的儲存路徑不一，可能導致部分老圖片顯示異常。

該版本也會自動掃描遷移對應的檔案，並且在「圖片管理」裡也分離出了專門的 ` 感想 ` 模組。

### 預覽
目前我們統一了應用內的預覽樣式，並且預覽介面適配了主題色。

**成就也支援預覽大圖了**。

### 載入
透過對檔案的物理存在的判斷、快取依據的最佳化調整，

減少了**會載入到已刪除的快取檔案、更改圖示後不立即生效**等奇怪問題的發生機率。

### 臨時檔案
統一了拍照臨時檔案的儲存路徑，避免儲存資源浪費。
並且現在備份中的「清空本地資料」也會清空所有媒體檔案。

---

## 🚸 **體驗：指引、互動最佳化完善**

### 指引
對於收到過比較多的諮詢的地方，我們在應用內嘗試增加了更多的說明。

> 凍結有什麼作用？子分類如何使用？怎麼建立感想？

比如 ` 凍結 `、` 子分類 ` 和 ` 感想 ` 功能。

![](_media/189/23.png ': size=30%')

> 商品不能刪除、編輯嗎？

` 長按選中 ` 的操作也有很多類似的反饋。

因此我們為部分底部彈窗也增加了選中按鈕和指引。

### 互動
互動方面，較多問題反饋的點我們也嘗試進行了最佳化：
- *無法刪除預設清單*：預設清單現在支援歸檔，也就是隱藏
- *如何退出離線模式*：編輯資料頁面增加了退出離線模式按鈕
- *（因為在進階裡關了 app 的振動），開啟番茄振動無效*：在進階關閉振動、響鈴時，番茄設定裡對應選項會有說明
- *委託頁無法檢視負面無限事項完成了多少次*：負面無限事項適配了對應的顯示
- *番茄按了重置（而不是完成）按鈕沒獲得番茄*：增加二次確認
- *番茄後臺被殺*：設定中增加 ` 相容性配置 ` 連結和強制小紅點
- *登入失效時，一直提示失效*：完善對應的判斷，限制提示條件和間隔

### 其他
除了使用者反饋的問題外，還針對很多已知問題做了最佳化。

比如統一處理了 app 內各個頁面的搜尋互動邏輯。



在搜尋狀態時，
1.  第一次點選返回鍵是清空搜尋框
2.  第二次點選返回鍵纔是退出搜尋狀態



建立成就和子分類出現的位置也做了最佳化，
- 成就預設在列表最下方；
- 子分類在列表最上方。



部分輸入框也最佳化了互動：

- 輸入金幣數量、目標重複次數時，會自動全選當前的數值

---

## 💫 **ONE MORE THING**
### 亞馬遜應用商店



近期我們籌備並在 5 月 30 號成功上架了亞馬遜應用商店。

在亞馬遜應用商店上，《人升》作為付費應用，目標主要是面向海外使用者。

![](_media/189/25.png ': size=30%')



Windows 11 的安卓子系統的官方合作商店也是亞馬遜應用商店。

但由於目前 Windows 11 版本的亞馬遜應用商店似乎是在白名單內測應用，目前經驗證還是搜尋不到《人升》的。

> 未來或許有機會在能夠在微軟商店直接搜尋下載該版本人升。



### 文件

#### 文章施工



![](_media/189/24.png ': size=30%')

近期，我們也在重新整理文件庫。

由於《人升》的自定義複雜度，文件對於新使用者而言尤為重要。



如：

- 相容性配置，重寫成了表格形式，更加清晰明瞭
- 整合了使用者在 B 站分享的體系分享影片，並且在新手教程文件裡作了連結
- 備份頁面新增了由群管理員幫忙製作的恢復教程影片



不過也如我們在應用內公告所述，

由於人手、時間、打工問題，

實在欠缺精力在文件方面投入。

如果各位有意協助可以隨時聯絡我們，非常感謝~



#### 迭代更新



在文件的功能和體驗方面，

1. 我們定製和更換了文件的樣式和主題色，在手機上應該閱讀會更加清晰。
2. 加入了搜尋🔍功能。



---

## ✨ 完整更新日誌

**✨特性**
1.  支援多解鎖條件成就，成就詳情支援檢視條件詳情
2.  事項支援簡易標籤功能
3.  重複事項支援設定無期限
4.  商品頁面支援設定隱藏不可購買、售罄
5.  商品支援設定經驗值減少效果時，支援限制使用
6.  倉庫頁面支援多選、全選和批次退貨
7.  預設清單支援歸檔操作
8.  重新設計整理設定、資訊、商店頂欄、編輯清單等頁面
9.  重新設計應用內部分圖示（預設卡片相關圖示、金幣、經驗值、成就圖示）
10. 圖片儲存移入外部應用私有路徑


**♻️最佳化**
1.  設定頁面增加相容性配置
2.  番茄鍾倒計時-重置操作增加二次確認
3.  事項凍結增加說明
4.  子分類增加說明
5.  離線模式時，編輯資料頁面增加退出離線模式按鈕
6.  最佳化負面事項的統計，支援顯示當日次數和支援成就跟蹤
7.  最佳化應用啟動速度
8.  成就圖示支援檢視大圖
9.  隨機任務增加點贊（領取數）統計
10.  統一最佳化搜尋互動
11.  選擇事項時，切換至空列表顯示空佈局（而非一直 loading）
12.  檢視大圖頁面適配當前主題色設定
13.  最佳化選擇商品、任務彈窗高度變化時的動畫效果
14.  備份設定中，“刪除本地資料”也會支援刪除媒體檔案
15.  統一拍照的臨時檔案儲存和刪除邏輯
16.  區分預設和載入失敗的圖示
17.  事項預設開啟獨立懲罰設定
18.  最佳化感想頁面的重新整理、動畫邏輯和載入速度
19.  部分詳情彈窗增加快捷“選中”按鈕
20.  在進階裡的“音效”、“振動”總開關關閉時，番茄設定裡也提供對應說明
21.  新建的成就和子分類排序最佳化
22.  基礎庫和依賴升級
23.  最佳化成就進度計算方式
24.  修改“目標重複次數”的計算方式，改為遵循歷史記錄的統計完善，與詳情內次數保持一致
25.  最佳化凍結的英文操作文案
26.  輸入金幣數量、目標重複次數時，會自動全選當前的數值

**🐛修復**
1.  修復在事項執行重複邏輯後，設定的計數影響商品獎勵失效的問題
2.  修復商店的排序分組問題
3.  修復隨機任務在某些情況下，上下翻頁異常問題
4.  修復某些情況使用正計時後，狀態頁面的「番茄」當日計時不準確的問題
5.  修復團隊事項執行重複邏輯會丟失計數事項型別設定的問題
6.  修復選擇成就條件相關任務時，會高亮顯示番茄正在選中的任務問題
7.  修復感想圖片沒有獨立儲存和顯示問題
8.  修復在登入失效時，可能頻繁彈出失效提示的問題
9.  新建任務、團隊、子任務的部分特殊輸入框不應該允許鍵盤輸入
10.  最佳化桌面小部件的無限事項的完成次數統計方式，與應用內保持一致
11.  修復 ATM 調整利率後，可能會以累加的時長跟調整後的利率計算利息的問題
12.  修復智慧清單內，凍結任務可能仍會顯示的問題
13.  最佳化選中某些物件時，仍可點選選擇欄擋住的操作按鈕的問題
14.  修復修改商品顏色不會立即重新整理 UI 的問題
15.  修復保持低利率（未能獲得 1 金幣）後突然設定成高利率可能得到鉅額利息的問題
16.  修復全部清單會顯示凍結任務的問題
17.  修復開啟搜尋欄後完成任務、使用商品後彈出搜尋框的問題
18.  修復修改無限任務的名稱後，應用內的當日完成次數可能與小部件不符的問題
19.  修復完成無限任務時出現的詭異動畫效果

**🐛內測 rc01-> rc03 修復改動**

> 有一部分屬於線上問題，寫到了上面去了。比如「修復全部清單會顯示凍結任務的問題」。
> 這裏主要說明內測新增功能引起的問題。

1.  修復成就多條件，刪除條件不會重新進度的問題
2.  修復成就多條件，在一個條件達到目標後，再編輯目標，進度沒法再推進的問題
3.  修復首頁的小紅點都失效的問題
4.  最佳化成就進度的計算進度
5.  修復桌面小部件對無期限的重複任務顯示異常期限的問題
6.  修復首次安裝啟動的引導頁動畫明顯示卡頓的問題
7.  修復首次安裝進入首頁後，再後退，可以退回到引導頁的問題
8.  最佳化簡易標籤的分隔規則，如空格等也算是分隔符號
9.  修復點選幾次卡片後，點選任務名稱無效的問題
10.  完善英文和繁體中文，Play 版本更新更多語言文字
11.  凍結事項後，全部清單或其他智慧清單的頂部卡片計數異常
12.  修復無期限的重複任務的詳情頁面統計異常的問題

---
還沒有關注公眾號？

關注一波小透明吧.jpg
