# 备份

[在微信公众号查看本文（含坚果云备份的设置视频教程）](https://mp.weixin.qq.com/s?__biz=MzI0OTQ4OTAxMQ==&mid=2247483867&idx=1&sn=d24068b74810d5b91b37c1abda436eca&chksm=e991f2c7dee67bd1ed49e74b3131bf7812c22f2a58a82cdac3c30182665296262a3c86a77b1d&mpshare=1&scene=23&srcid=1205mlIjJmwwyVugMJ7P25jM&sharer_sharetime=1639901809270&sharer_shareid=aefb2cf8bbd4980bf3f827f86feb6b04#rd) 

## 一、简介

### 1.1 为什么需要配置备份？

由于工具类 APP 性质特殊，一般需要支持本地离线使用，所以数据一般是保存在本地的。

如果不进行备份的话，在卸载应用、更换手机的情况下，你可能会丢失所有的本地数据，只保留团队动态之类的云端数据。

**这跟你直接卸载微信，也会丢失所有聊天记录是一致的。**

**也跟你更换手机后，微信数据也需要迁移才能够保留聊天记录一样**（同品牌的手机，大都会支持应用数据迁移，《人升》的数据也能够直接迁移）。

> 当然，财大气粗的一些商业应用是支持本地数据存储+在线增量同步的。
>
> 但是增量同步实际上是个技术壁垒，如果处理不好甚至会导致数据丢失，也会需要一定的算法或者服务器资源支撑。

<br/>

《人升》由于种种原因，目前无法实现内置云同步功能：

- **增量同步属于技术壁垒**

  我们目前没有技术，服务器也没有足够的计算和存储资源来实现增量同步

- **全量同步也需要大量的云存储空间资源**

- **用户隐私安全**

  我们无法承担用户隐私数据泄露的风险。

  隐私数据直接不经过服务器，能够最大程度上实现隐私安全。

  用户才能够放心记录自己的隐私事项和感想。

  并且删除数据也是对应的十分简单。

<br/>

**因此，《人升》提供了多种备份渠道：**

- WebDAV 备份
- 直接导出文件进行备份（默认路径和自定义路径）
- Dropbox 备份

<br />

### 1.2 备份内容

备份会导出你的所有本地数据到一个压缩文件内，包括但不限于以下内容：

- 待办事项内容和历史记录

- 商品、金币等所有记录

- 成就解锁记录、自定义成就

- 感想

- 番茄记录

- 各类媒体文件，如事项附件、商品图标、自定义卡片背景和音效等

  注意：如果备份时勾选了「忽略媒体文件」则不会导出该项目

- 选项配置

<br />

### 1.3 方式对比

| 方法           | 卸载 | 手机损坏                                                  | 自动备份 | 备注                                                         |
| -------------- | ---- | --------------------------------------------------------- | -------- | ------------------------------------------------------------ |
| 默认路径备份   | ❌    | ❌                                                         | ❌        | 仅用于非卸载情况下的数据恢复                                 |
| 自定义路径备份 | ✔️    | ❌（除非手动将文件导向其他设备，或者将文件选择至远程路径） | ❌        | **如果安装了 Google Drive、坚果云 app，也可以在这里实现备份至 Google Drive 或坚果云，实现手动云备份** |
| 自动备份至`下载`文件夹 | ✔️ | ❌ | ✔️ | 仅适用于Android10及以上设备 |
| WebDAV 备份     | ✔️    | ✔️                                                         | ✔️        | 需要选择支持 WebDAV 备份的平台或者自部署，推荐使用坚果云       |
| Dropbox 备份    | ✔️    | ✔️                                                         | ✔️        | 需要一定的网络条件，国内环境可能比较麻烦                     |

<br />

完全可以通过配置来实现云同步的效果，也完全不用担心数据丢失。

由于 Dropbox 需要特定网络条件才能访问，

**我们强烈推荐使用坚果云配置 WebDAV 实现云同步（只需要操作一次即可一劳永逸），操作步骤可参考下文。**

当然，你也可以选择每隔一段时间，手动导出备件文件进行备份。

---

## 二、配置坚果云实现 WebDAV 备份

![](_media/backup/01.jpg ': size=30%')

备份功能现已支持通过 WebDAV 协议备份。

> 简言之，只要某个网盘或者你自己部署的服务器支持 WebDAV 协议，人升都能将数据备份上去或者从中恢复数据。
>
> 但国内支持 WebDAV 协议的知名网盘目前只有**坚果云**。

### 2.1 使用方法

#### 2.1.0 视频教程

> [公众号里有视频教程](https://mp.weixin.qq.com/s?__biz=MzI0OTQ4OTAxMQ==&mid=2247483867&idx=1&sn=d24068b74810d5b91b37c1abda436eca&chksm=e991f2c7dee67bd1ed49e74b3131bf7812c22f2a58a82cdac3c30182665296262a3c86a77b1d&mpshare=1&scene=23&srcid=1205mlIjJmwwyVugMJ7P25jM&sharer_sharetime=1639901809270&sharer_shareid=aefb2cf8bbd4980bf3f827f86feb6b04#rd)

#### 2.1.1 获取 WebDAV 地址、账号、密码

理论上任意支持 WebDAV 协议的服务都可以使用。

**国内可以使用坚果云：**

##### 2.2.2 手机版操作

1.  移动端安装坚果云 APP（可选：参考下述的电脑版操作，使用浏览器执行桌面版操作）。
   ![](_media/backup/04.png ': size=50%')
2.  注册并登录坚果云后，在坚果云的 ` 设置 `-` 第三方应用管理 ` 处，添加应用密码，应用名称可输入 LifeUp。
    ![](_media/backup/05.png ': size=50%')
    ![](_media/backup/06.png ': size=50%')
    ![](_media/backup/07.png ': size=50%')
3.  添加成功后，你能在该页面看到 ` 服务器地址 `、` 账号 ` 和刚才添加的应用密码等信息。
    ![](_media/backup/08.png ': size=50%')
4.  接下来的步骤参考下文**2.2.4 应用配置**。

##### 2.2.3 电脑版操作

> 该操作步骤基于桌面版网站，手机版网站可参考步骤对应进行设置（或者直接浏览器设置为桌面版模式）

1.  首先打开坚果云官网，注册并且登录账号。

2.  点击**右上角用户名**→` 账号信息 `。

3.  切换至安全选项。

![](_media/backup/02.png ': size=50%')

4.  在右边 ` 第三方应用管理 ` 处，点击新增应用，输入名称（如：LifeUp）

5.  然后点击 ` 生成密码 `，保存此处的 ` 服务器地址 `、` 账号 ` 和 ` 密码 ` 等信息，然后进入应用内进行配置。

![](_media/backup/03.png ': size=50%')

#### 2.2.4 应用配置

接下来就需要将上述的三个信息，复制并填写到人升 APP 中的 ` 侧边栏 `→` 设置 `→` 数据备份/恢复/清除 `→`WebDAV 配置 ` 页面。填写后，确认测试成功后，即可在备份页面使用 ` 备份至 WebDAV` 或者 ` 自动云同步 ` 功能。

![](_media/backup/09.png ': size=30%')

#### 2.2.5 注意点

- 如果你的备份文件体积已经大于 10MB，那么请根据实际情况考虑 ` 忽略媒体文件 ` 或者调整 ` 自动备份间隔 `。
- **如果备份文件过大，可能导致上传失败。**这时候也可以尝试开启 ` 忽略媒体文件 `。并且可以尝试另行备份媒体文件，不然即便成功也算消耗大量流量。甚至导致坚果云那边流量超额，无法上传。

---

## 三、恢复

![](_media/backup/10.png': size=30%')

### 自定义路径

?> 如果你安装了坚果云、Google Drive 等云盘 app，也能使用该方式在侧边栏下载备份安装。理论上不需要文件权限，恢复更轻松。

这种备份方式需要你手动将文件传至想要恢复备份的手机中，然后再应用内选取该文件进行恢复。

!> 由于 Android 10、11 对文件存储权限做了限制。如果你使用 QQ、微信传递文件的话，查找文件会比较麻烦。并且一些路径可能会读取失败。

**推荐使用电脑进行操作**，并将文件最好放在文件存储根目录中进行备份。

以下路径可能由于权限问题，恢复失败：
- ` 文件存储根目录/Android` 下任意子路径
- ` 文件存储根目录/Download（下载）`
- ` 文件存储根目录/Download（下载）` 下任意子路径

#### Android 10 及更低版本

<iframe src="//player.bilibili.com/player.html?aid=380415695&bvid=BV1PZ4y1S7ah&cid=479527125&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="80%" height="600"> </iframe>

#### Android 11 及以上

<iframe src="//player.bilibili.com/player.html?aid=250882869&bvid=BV1gv411g7ys&cid=419591550&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="80%" height="600"> </iframe>

### WebDAV/DropBox

这两种云同步方式，只需要配置好各自的信息后，执行对应的恢复方式即可。

当然，特殊情况你也可以去对应的平台下载文件，手动进行本地恢复。
