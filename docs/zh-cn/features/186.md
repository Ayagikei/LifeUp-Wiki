# 1.86.0 - 成就子分类

## 🔖总览

1. **成就子分类**
2. **图片管理**
3. **番茄钟兑换商品**
4. **统一通知渠道**
5. **Google Drive备份**
6. **比较小但实用的改进项**
7. **完整更新日志**

<!-- more -->

---

## ✨ **成就子分类**

![](_media/186/01.png ':size=30%')

在v1.86.0中，你可以创建类似「系统成就」里面的子分类。

在一个成就清单内再继续划分子类目，以便管理。

并且能够自动统计子分类下的成就解锁数量和总数量。



### 📝 使用方式

1. 在「新建成就」页面即可切换类别为“子分类”。

![](_media/186/02.png ':size=30%')

2. 创建完「子分类」后，在清单页面，**长按拖动刚创建出来的子分类**到合适的位置即可。



###  🚧 后续发展

暂定在v1.87.0版本中加入折叠子分类的功能。

因折叠功能还影响到排序等交互，目前还在处理中~



---

## ✨ 图片管理

![](_media/186/03.png ':size=30%')

新版本引入了「图片管理」功能，你可以在该页面查看各种类目下的自定义图片，并执行「删除」操作。



因为《人升》中图片使用的场景复杂，应用有时候没法准确判断图片是否要删除而将其保留下来。

日积月累可能会导致备份文件体积增大，进而使得备份消耗更多流量、时间，甚至降低了上传的成功率。



> 在旧版本中，我们的措施是让相册能够扫描到应用内的图片。
>
> 后果是很多用户不小心误删了这些图片，又或者相册不便隐藏这些图片，导致各类问题反馈。



### 📝 使用方式

点击侧边栏-`设置`-`数据备份/恢复/清除`，划到页面底部点击`图片管理`即可。



### 🚧 后续发展

**而使用图片管理功能可以方便你在应用内管理图片，删除冗余的文件，也为我们后续的设计做了铺垫：**

1. 使相册不再扫描到应用内图片**（同时在该版本上线）**
2. 将媒体文件移动至应用内部路径，以防被垃圾清除软件删除（未来版本）
3. 支持设置裁剪图片尺寸，支持更高尺寸的图片（未来版本，会员功能）
4. 目前似乎漏掉了成就的图片管理（计划下个版本补充）



---

## ✨ 番茄兑换商品

![](_media/186/04.png ':size=30%')

![](_media/186/05.png ':size=30%')

该版本新增了番茄的新用途，除了**食用获取经验值**、**售出获取金币**以外，你还可以设置**番茄兑换某件商品**。



### 📝 使用方式

在番茄页面点击右上角设置图标，在页面内选择`兑换设置`进行设置。



**推荐用法：**

- 创建一个专属货币（比如叫做番茄币）
- 设置按一定比例番茄兑换番茄币
- **利用合成系统创建专门的番茄币商店（合成配方）**
- 使用番茄币获取专属的奖励



---

## ✨ 统一通知渠道

![](_media/186/06.png ':size=30%')

这是个比较隐藏的优化点。

在新版本中，我们针对应用发出的通知做了统一优化。

不同的消息渠道有着不一样的优先级、音效表现、振动表现等。



### 📝 使用方式

依系统有别。

一般是进入到系统的应用管理页面，找到《人升》进入，并选择`通知`管理。

**如上所述，你可以针对应用内的各类消息进行不同的配置。**

**比如为任务提醒设置最高优先级，允许振动和铃声，并且可以从系统级别自定义铃声（不需要会员）。**

![](_media/186/07.png ':size=30%')





---

## ✨ Google Drive 备份

![](_media/186/08.png ':size=30%')

新版本支持了Google Drive备份方式（需要处于特定网络条件下）。

并且我们针对Google Drive，做了各类上传策略优化、退避重试算法优化，并且它自身支持断点续传，使得在大文件上传的场景下有着不错的表现：

**实测上传30MB以内的备份文件成功率不俗。**



> 而同等条件下，由于WebDAV的框架支持有限，很容易上传失败。



### 📝 使用方式

点击侧边栏-`设置`-`数据备份/恢复/清除`，点击Google Drive进行配置（其实就是谷歌账号授权一下）。

配置成功后，可点击`备份`操作手动进行备份，或点击`恢复`按钮从Google Drive恢复数据。



**如需配置自动云备份，**只需要将云备份方式切换至Google Drive即可。



### 🚧 后续发展

尝试优化WebDAV上传的成功率。



---



## ✨ 比较小但有用的改进

- 商品支持设置随机金币效果
- 成就支持批量复制
- 自定义退货打折比例
- “全部”清单支持重命名
- 负面事项支持次数统计

<br />

## ✨ 完整更新日志

**✨特性**

1. 成就子分类：划分类别，自动统计类目计数
2. Google Drive备份
3. 图片管理功能（备份页面内）
4. 商品随机金币效果
5. 成就批量复制
6. 计步支持多次输入步数和多次领取奖励
7. 番茄钟支持设置商品兑换
8. 支持自定义退货打折比例
9. 备份改用专属格式（部分系统支持直接打开导入备份）
10. 简易合成支持批量操作
11. 新增自定义音效选项：商品使用
12. 新增成就解锁条件：当前ATM存款
13. 负面事项支持详情页面的次数统计
14. “全部”清单支持重命名
15. 统一应用的通知渠道命名和描述

**♻️优化**

1. 优先排序已解锁但未领取奖励的成就
2. 状态页面的番茄今日专注时长会根据时长按小时数显示
3. 仓库增加商品描述显示
4. 新帐号注册会弹出确认对话框
5. 支持显示维护公告
6. 番茄额外计时增加“跳过”的确认对话框
7. 支持卸载应用时保存数据（需要系统支持）
8. 优化备份和恢复逻辑
9. 优化单次事项和无限事项的逾期逻辑，支持编辑
10. 优化无限事项的图表统计时间依据，以完成时间为准而非期限时间
11. 简洁模式卡片也会显示单次、无限事项的逾期时间
12. 尝试提升倒计时功能的后台运行存活率
13. 优化感想功能：
    - 默认开启
    - 团队任务设置页面不显示实际不生效的“感想”开关
    - 去除令人迷惑的感想开关记忆功能
14. 商品、仓库清单选择弹窗增加商品数量展示
15. 通知栏继续计时时，也取消正在进行中的振动效果
16. 世界模块中的动态文本支持选中复制
17. 优化自定义成就页面的数据刷新动画效果
18. 优化恢复逻辑，显示“加载中”对话框而非直接卡死界面
19. 优化“崩溃弹窗”可能看不到底部按钮的问题
20. 点击任务通知提醒，现在会跳转到任务所在的清单页面
21. 自定义属性图标，现支持选择应用内置图标库
22. 优化“稍后阅读”的分享操作名称，而非直接显示应用名
23. 优化成就解锁通知，现会显示成就描述
24. 桌面小部件进入主页，也会自动跳转至“委托”模块
25. 优化完成日事项清单后的文案显示
26. 优化商品倒计时效果的操作文案和顺序
27. 在隐藏所有属性的情况下，状态页面也不再显示“属性”卡片

**🐛修复**

1. 修复一个罕见的成就解锁弹窗崩溃问题
2. 修复桌面小部件在宽度不足的清空下，一个任务可能挤占多行的显示问题
3. 修复计步首次运动授权，可能会支持显示传感器积累的总步数问题
4. 修复暂停一个倒计时，再启动另一个倒计时会出现的崩溃或恢复错乱问题
5. 修复可输入商品0分钟倒计时效果并会崩溃的问题
6. 修复在新增或编辑事项页面，重命名当前选中的清单，显示的清单名称没有及时刷新的问题
7. 修复“每年”重复频次的卡片显示异常
8. 修复自定义金币在某些情况下不会及时生效的问题
9. 修复小部件会显示冻结事项的问题
10. 修复自定义成就没有显示“长按操作”提示的问题
11. 修复“我的”页面的总经验值没有统计自定义属性经验值的问题
12. 修复“感想”页面在预览图片后的异常刷新回到最顶的问题
13. 修复在MIUI系统下，已经启动应用的时候，“番茄”的静态快捷方式只会跳转到首页的问题
14. 修复非会员可能也会加载自定义背景的问题
15. 修复商店页面金币数量刷新不及时的问题
16. 修复日历不能翻到下一年的问题
17. 修复修改清单的名称后，小部件上的清单名称不会及时刷新的问题

**🐛内测 -> 正式版的修复改动**

1. 优化Google Drive上传大文件的成功率，增加重试和优化分块策略
2. 修复非中文环境下，会员可能不展示单独自定义任务背景按钮的问题
3. Google Drive/DropBox备份失败，改为跳转到了备份页面而非WebDAV配置页面
4. 增加Google Play校验失败的弹窗说明，提供数据导出路径
5. 「我的」页面的昵称跟随会员状态变动颜色
6. 消除大部分场景下的ATM利率浮点数误差问题
7. 删除本地数据时，也会同步删除自定义背景、属性图片和音效文件
8. 修复步数统计图的异常问题
9. 修复从新建待办事项页面点击属性的问号按钮，跳转到属性自定义页面编辑后，回到新建待办事项页面属性未刷新的问题
10. 自定义商品效果时，点击弹窗外部不再会自动取消弹窗，避免编辑中的内容丢失
11. 优化商品设置页面的外语UI问题（俄语文本过长）
12. 尝试修复部分机型的彩色Toast崩溃问题
13. 修复仓库页面选中状态下，仍能点击使用按钮的问题
14. 修复智能清单中显示已逾期单次任务的逻辑，适配新的逾期时间存储方式
15. 在仓库选中状态下，切换清单应该取消选择