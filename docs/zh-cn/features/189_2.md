# v1.89.0 - 多解锁条件成就更新介绍（其二）

> 欢迎在公众号查看本文，并可订阅未来的更新~
>
> [v1.89.0 - 多解锁条件成就更新介绍（其二） (qq.com)](https://mp.weixin.qq.com/s?__biz=MzI0OTQ4OTAxMQ==&mid=2247483960&idx=1&sn=11c7e50afdb31b492dd6d0cc22917428&chksm=e991f124dee6783230abda9c0f820a3f06262a5fc4993200684bcd865a67c0582794654c5ab6&token=1232886144&lang=zh_CN#rd)





本文主要介绍一些细节改动点和**提供完整更新日志**。

如果你想要查看新增的功能特性介绍，可以查看上一篇更新介绍（其一）。



> 目前该版本仍在会员内测中。
>
> 加入会员后，在「扩展」页面选择加入 alpha 测试，即可在「关于」页面检测到更新。



## 🔖总览

1.  **💫UI：设置、资讯、新图标、动画效果**

2.  **⚡️性能：应用启动速度**

3.  **🖼️图片：调整路径、统一预览、加载、临时文件逻辑**

4.  **🚸体验：指引、交互优化完善**

5.  💫**ONE MORE THING**

6.  **完整更新日志**



---

## ✨ **UI：设置、资讯、新图标、动画效果**

“众所周知”，目前《人升》是没有专门的设计师，我们也是自学 UI 设计并且尝试迭代不同的 UI 风格，摸索出了现在的模样。

也因此应用内的页面样式并没有形成统一的风格，有一部分页面可能还是废弃的设计+代码架构。



我们会逐渐整改和重构这些设计和代码。

### 设置

![](_media/189/17.png ': size=30%')

该版本重新设计和组织了 ` 设置 ` 页面。

并且由于 `实验` 的性质与设置类似，都属于操作频次较低的设置项。

我们也将其挪入了设置页面中。

![](_media/189/18.png ': size=30%')

设置的子页面中，我们也梳理了各个选项的功能分类，增加子标题显示。

总体组织上应该会更合理，用户查找设置项也会更方便。

### 资讯

![](_media/189/19.png ': size=30%')

资讯模块也存在类似的问题，资讯过多且没有分类。用户很难一眼看出每一条目的类型和是否有更新。

本次版本为资讯支持了分类和独立小红点。

虽然有点逼死强迫症，**但现在资讯每一项都支持了独立小红点，用户能够明确知道是具体哪一项更新了。**

### 新图标

![](_media/189/20.png ': size=30%')
![](_media/189/21.png ': size=30%')

默认卡片的 UI 图标之前是来源多处站点，导致风格、边距、大小等不统一，我们难以维护和使用，感官上也会感觉不协调。

该版本外包重新设计任务卡片相关的一些图标，以及提供了新的成就图标。

商店方面也尝试加强了金币的存在感。

![](_media/189/22.png ': size=30%')

>由于上述的问题，这里不打算提供新旧版本的图标的切换。
>
>初切换图标总会有些不习惯，这是正常现象.jpg
>
>

### 动画效果

> 此处应有个视频

该版本改进了商品、任务选择弹窗的动画效果。

避免了老版本切换清单时，弹窗高度闪来闪去的问题。



> 这个问题其实困扰了我们很长时间。
>
> 一年以前就尝试过改进这里的效果但以失败告终。



---

## ⚡️ **性能：应用启动速度**
### 启动优化
> 节省时间就是节省金钱。

对于一款效率 APP 而言，启动速度也是影响使用体验的一大要素。

> 谁也不想打卡的时候还要看几秒钟广告吧.jpg



该版本我们重新梳理了应用的启动流程，代码层面上重构了主页的逻辑和架构。

**以下表格优化前后的数据：**

优化前后|冷启动|温启动|热启动
---|---|---|---
❌|515.5 毫秒|228.5 毫秒|91.0 毫秒
✅|396.2 毫秒|214.9 毫秒|92.2 毫秒

> 数据基于 Redmi K40 和特定的环境，实际使用可能受环境、安装来源、设备等影响。

目前线上的平均冷启动时长也在 500 毫秒左右，经过这个版本的优化，打开应用使用会更佳顺滑。



### 新增成就重构、感想优化
该版本为了支持多条件，也「顺便」对 ` 新增成就 ` 页面做了重构功能。

而我们对`感想`也做了加载速度和动画效果方面的优化。

对于大部分用户可能没法直观体会到“重构”、“性能”方面的优化益处。



这里做下简单说明，重构其实是使用更现代的代码实现现有的逻辑，能够减少维护这套代码的成本，也能方便未来新增新功能。

**对于用户侧的主要是潜在积极影响：**
- 更少 Bug（比如屏幕旋转不会导致数据丢失、更不容易出现数据不一致的问题）
- 性能更高（打开更快）
- 未来该模块更新功能更迅速

**我们认为对于一款考虑拥有未来的 APP 而言，**

**重构工作是必备的一环。**

因此我们也会持续在这一块投入时间。



#### 🚧 后续发展
目前内测版本也有用户反馈成就的进度计算可能存在延迟的问题。

经过排查这是由于计算逻辑的性能引起的。

在 v1.89.0-rc02 内测版本中，我们针对计算的任务做了一些简单但有效的优化措施。

目前计划在 v1.90.0 版本重构这一块的代码逻辑，尝试进一步提升计算性能，以及方便未来扩展更多的解锁条件。

---

## 🖼️ **图片：调整路径、统一预览、加载、临时文件逻辑**

v1.89.0 版本对图片做了一些杂七杂八的优化，简单列举下。

### 调整路径
线上版本，应用的媒体文件是存放在媒体路径 `（Android/media/{包名}）` 的。

但偶有用户发现图片被未知的外部软件删除的问题，我们决定将图片迁移到了外部私有存储路径 `（Android/data/${包名}/files/media）`，以减少这类问题。

同时，我们发现老版本有一次误修改了感想图片的存储路径。

导致那个版本前后的存储路径不一，可能导致部分老图片显示异常。

该版本也会自动扫描迁移对应的文件，并且在「图片管理」里也分离出了专门的 ` 感想 ` 模块。

### 预览
目前我们统一了应用内的预览样式，并且预览界面适配了主题色。

**成就也支持预览大图了**。

### 加载
通过对文件的物理存在的判断、缓存依据的优化调整，

减少了**会加载到已删除的缓存文件、更改图标后不立即生效**等奇怪问题的发生概率。

### 临时文件
统一了拍照临时文件的存储路径，避免存储资源浪费。
并且现在备份中的「清空本地数据」也会清空所有媒体文件。

---

## 🚸 **体验：指引、交互优化完善**

### 指引
对于收到过比较多的咨询的地方，我们在应用内尝试增加了更多的说明。

> 冻结有什么作用？子分类如何使用？怎么创建感想？

比如 ` 冻结 `、` 子分类 ` 和 ` 感想 ` 功能。

![](_media/189/23.png ': size=30%')

> 商品不能删除、编辑吗？

` 长按选中 ` 的操作也有很多类似的反馈。

因此我们为部分底部弹窗也增加了选中按钮和指引。

### 交互
交互方面，较多问题反馈的点我们也尝试进行了优化：
- *无法删除默认清单*：默认清单现在支持归档，也就是隐藏
- *如何退出离线模式*：编辑资料页面增加了退出离线模式按钮
- *（因为在进阶里关了 app 的振动），开启番茄振动无效*：在进阶关闭振动、响铃时，番茄设置里对应选项会有说明
- *委托页无法查看负面无限事项完成了多少次*：负面无限事项适配了对应的显示
- *番茄按了重置（而不是完成）按钮没获得番茄*：增加二次确认
- *番茄后台被杀*：设置中增加 ` 兼容性配置 ` 链接和强制小红点
- *登录失效时，一直提示失效*：完善对应的判断，限制提示条件和间隔

### 其他
除了用户反馈的问题外，还针对很多已知问题做了优化。

比如统一处理了 app 内各个页面的搜索交互逻辑。



在搜索状态时，
1.  第一次点击返回键是清空搜索框
2.  第二次点击返回键才是退出搜索状态



创建成就和子分类出现的位置也做了优化，
- 成就默认在列表最下方；
- 子分类在列表最上方。



部分输入框也优化了交互：

- 输入金币数量、目标重复次数时，会自动全选当前的数值

---

## 💫 **ONE MORE THING**
### 亚马逊应用商店



近期我们筹备并在 5 月 30 号成功上架了亚马逊应用商店。

在亚马逊应用商店上，《人升》作为付费应用，目标主要是面向海外用户。

![](_media/189/25.png ': size=30%')



Windows 11 的安卓子系统的官方合作商店也是亚马逊应用商店。

但由于目前 Windows 11 版本的亚马逊应用商店似乎是在白名单内测应用，目前经验证还是搜索不到《人升》的。

> 未来或许有机会在能够在微软商店直接搜索下载该版本人升。



### 文档

#### 文章施工



![](_media/189/24.png ': size=30%')

近期，我们也在重新整理文档库。

由于《人升》的自定义复杂度，文档对于新用户而言尤为重要。



如：

- 兼容性配置，重写成了表格形式，更加清晰明了
- 整合了用户在 B 站分享的体系分享视频，并且在新手教程文档里作了链接
- 备份页面新增了由群管理员帮忙制作的恢复教程视频



不过也如我们在应用内公告所述，

由于人手、时间、打工问题，

实在欠缺精力在文档方面投入。

如果各位有意协助可以随时联系我们，非常感谢~



#### 迭代更新



在文档的功能和体验方面，

1. 我们定制和更换了文档的样式和主题色，在手机上应该阅读会更加清晰。
2. 加入了搜索🔍功能。



---

## ✨ 完整更新日志

**✨特性**
1.  支持多解锁条件成就，成就详情支持查看条件详情
2.  事项支持简易标签功能
3.  重复事项支持设置无期限
4.  商品页面支持设置隐藏不可购买、售罄
5.  商品支持设置经验值减少效果时，支持限制使用
6.  仓库页面支持多选、全选和批量退货
7.  默认清单支持归档操作
8.  重新设计整理设置、资讯、商店顶栏、编辑清单等页面
9.  重新设计应用内部分图标（默认卡片相关图标、金币、经验值、成就图标）
10. 图片存储移入外部应用私有路径


**♻️优化**
1.  设置页面增加兼容性配置
2.  番茄钟倒计时-重置操作增加二次确认
3.  事项冻结增加说明
4.  子分类增加说明
5.  离线模式时，编辑资料页面增加退出离线模式按钮
6.  优化负面事项的统计，支持显示当日次数和支持成就跟踪
7.  优化应用启动速度
8.  成就图标支持查看大图
9.  随机任务增加点赞（领取数）统计
10.  统一优化搜索交互
11.  选择事项时，切换至空列表显示空布局（而非一直 loading）
12.  查看大图页面适配当前主题色设定
13.  优化选择商品、任务弹窗高度变化时的动画效果
14.  备份设置中，“删除本地数据”也会支持删除媒体文件
15.  统一拍照的临时文件存储和删除逻辑
16.  区分默认和加载失败的图标
17.  事项默认开启独立惩罚设置
18.  优化感想页面的刷新、动画逻辑和加载速度
19.  部分详情弹窗增加快捷“选中”按钮
20.  在进阶里的“音效”、“振动”总开关关闭时，番茄设置里也提供对应说明
21.  新建的成就和子分类排序优化
22.  基础库和依赖升级
23.  优化成就进度计算方式
24.  修改“目标重复次数”的计算方式，改为遵循历史记录的统计完善，与详情内次数保持一致
25.  优化冻结的英文操作文案
26.  输入金币数量、目标重复次数时，会自动全选当前的数值

**🐛修复**
1.  修复在事项执行重复逻辑后，设置的计数影响商品奖励失效的问题
2.  修复商店的排序分组问题
3.  修复随机任务在某些情况下，上下翻页异常问题
4.  修复某些情况使用正计时后，状态页面的「番茄」当日计时不准确的问题
5.  修复团队事项执行重复逻辑会丢失计数事项类型设置的问题
6.  修复选择成就条件相关任务时，会高亮显示番茄正在选中的任务问题
7.  修复感想图片没有独立存储和显示问题
8.  修复在登录失效时，可能频繁弹出失效提示的问题
9.  新建任务、团队、子任务的部分特殊输入框不应该允许键盘输入
10.  优化桌面小部件的无限事项的完成次数统计方式，与应用内保持一致
11.  修复 ATM 调整利率后，可能会以累加的时长跟调整后的利率计算利息的问题
12.  修复智能清单内，冻结任务可能仍会显示的问题
13.  优化选中某些物件时，仍可点击选择栏挡住的操作按钮的问题
14.  修复修改商品颜色不会立即刷新 UI 的问题
15.  修复保持低利率（未能获得 1 金币）后突然设置成高利率可能得到巨额利息的问题
16.  修复全部清单会显示冻结任务的问题
17.  修复开启搜索栏后完成任务、使用商品后弹出搜索框的问题
18.  修复修改无限任务的名称后，应用内的当日完成次数可能与小部件不符的问题
19.  修复完成无限任务时出现的诡异动画效果

**🐛内测 rc01-> rc03 修复改动**

> 有一部分属于线上问题，写到了上面去了。比如「修复全部清单会显示冻结任务的问题」。
> 这里主要说明内测新增功能引起的问题。

1.  修复成就多条件，删除条件不会重新进度的问题
2.  修复成就多条件，在一个条件达到目标后，再编辑目标，进度没法再推进的问题
3.  修复首页的小红点都失效的问题
4.  优化成就进度的计算进度
5.  修复桌面小部件对无期限的重复任务显示异常期限的问题
6.  修复首次安装启动的引导页动画明显卡顿的问题
7.  修复首次安装进入首页后，再后退，可以退回到引导页的问题
8.  优化简易标签的分隔规则，如空格等也算是分隔符号
9.  修复点击几次卡片后，点击任务名称无效的问题
10.  完善英文和繁体中文，Play 版本更新更多语言文本
11.  冻结事项后，全部清单或其他智能清单的顶部卡片计数异常
12.  修复无期限的重复任务的详情页面统计异常的问题

---
还没有关注公众号？

关注一波小透明吧.jpg
